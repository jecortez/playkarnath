<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Play Karnath!</title>
		<link rel="stylesheet" href="node_modules/deck-of-cards/example/example.css">
		<link rel="stylesheet" href="css/karnath.css">
	</head>
	<body>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="node_modules/deck-of-cards/dist/deck.min.js"></script>
		<script src="js/karnath.js"></script>
		<div class="flex-container">
			<!-- Trigger/Open The Modal -->
			<button id="rule_button" class="button">Rules</button>
			<!-- The Modal -->
			<div id="myModal" class="modal">
				<!-- Modal content -->
				<div class="modal-content">
					<span class="close">&times;</span>
					<h1>How to play Karnath Kards</h1>
					<ul>
						<li>To begin, a player is chosen at random.</li>
						<li>Each turn, the player re-shuffles the deck and reveals the top two cards.</li>
						<li>If the suits are different, the player adds the sum to their score (Face Cards / Jokers / Aces count as 15)</li>
						<li>The player can then choose to end their turn and bank their score, or to take another pair.</li>
						<li>If the player turns over two cards of the same suit, they lose all unbanked points and end their turn.</li>
						<li>The winner is the first player to either clear an entire deck in their turn, or to bank 500 points.</li>
						<li>Rules from <a href="https://imgur.com/MtVGvGy">here</a></li>
					</ul>
				</div>
			</div>
			<div id="container"></div>
			<div id="top_bar">
				<div id="notifications"></div>
				<div id="unbanked_points"></div>
			</div>
			<button class="button" type="text" id="new_game_button" onclick="reset_game()" hidden>New Game</button>
			<div id="player_ui" class="player_ui">
				<button class="button" id="draw_button" type="text" onclick="draw_cards()">Draw</button>
				<button class="button" id="bank_button" type="text" onclick="bank()" ">Bank</button>
			</div>
			<div class="score" id="player0_score">
				<img src="images/p1.png" width="100px" height="100px">
				Player 1:
				<div id="player0_points">
				</div>
			</div>
			<div class="score" id="player1_score">
				<img src="images/p2.png" width="100px" height="100px">
				Player 2:
				<div id="player1_points">
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	// Init the game
	init();
	reset_game();
	reshuffle_deck();
	// Modal stuff
	// Get the modal
	var modal = document.getElementById('myModal');
	// Get the button that opens the modal
	var btn = document.getElementById("rule_button");
	// Get the <span> element that closes the modal
		var span = document.getElementsByClassName("close")[0];
		// When the user clicks on the button, open the modal
		btn.onclick = function() {
		modal.style.display = "block";
		}
		// When the user clicks on <span> (x), close the modal
			span.onclick = function() {
			modal.style.display = "none";
			}
			// When the user clicks anywhere outside of the modal, close it
			window.onclick = function(event) {
			if (event.target == modal) {
			modal.style.display = "none";
			}
			}
		</script>
	</body>
</html>